{"version":3,"sources":["node_modules/hyperapp/src/index.js","node_modules/fft.js/lib/fft.js","audio.ts","index.tsx","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","app","state","actions","view","container","map","rootElement","oldNode","recycleElement","lifecycle","skipRender","isRecycling","globalState","clone","wiredActions","wireStateToActions","scheduleRender","element","toLowerCase","call","childNodes","nodeType","nodeValue","resolveNode","render","patch","setTimeout","target","source","out","i","setPartialState","path","value","slice","getPartialState","action","data","result","then","concat","getKey","eventListener","event","currentTarget","events","type","updateAttribute","oldValue","isSvg","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldAttributes","cb","onupdate","removeChildren","ondestroy","removeElement","parent","done","removeChild","onremove","newElement","insertBefore","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","k","newKey","keyedNode","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","window","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","getElementById","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","Array","isArray","Function","deps","cached","cache","some"],"mappings":"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CpD,OAAD,EAAU2D,QAAQ,CAAC9C,CAAD,CAAR,CAAY,CAAZ,CAAV,EAA0B8C,QAAQ,CAAC9C,CAAD,CAAR,CAAY,CAAZ,CAA1B,CAAb;AACD;AACF;AACF;;AACD,WAAOb,OAAP;AACD;AACF;;AClZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"koeasobi.f69400ca.js","sourceRoot":"..","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","'use strict';\n\nfunction FFT(size) {\n  this.size = size | 0;\n  if (this.size <= 1 || (this.size & (this.size - 1)) !== 0)\n    throw new Error('FFT size must be a power of two and bigger than 1');\n\n  this._csize = size << 1;\n\n  // NOTE: Use of `var` is intentional for old V8 versions\n  var table = new Array(this.size * 2);\n  for (var i = 0; i < table.length; i += 2) {\n    const angle = Math.PI * i / this.size;\n    table[i] = Math.cos(angle);\n    table[i + 1] = -Math.sin(angle);\n  }\n  this.table = table;\n\n  // Find size's power of two\n  var power = 0;\n  for (var t = 1; this.size > t; t <<= 1)\n    power++;\n\n  // Calculate initial step's width:\n  //   * If we are full radix-4 - it is 2x smaller to give inital len=8\n  //   * Otherwise it is the same as `power` to give len=4\n  this._width = power % 2 === 0 ? power - 1 : power;\n\n  // Pre-compute bit-reversal patterns\n  this._bitrev = new Array(1 << this._width);\n  for (var j = 0; j < this._bitrev.length; j++) {\n    this._bitrev[j] = 0;\n    for (var shift = 0; shift < this._width; shift += 2) {\n      var revShift = this._width - shift - 2;\n      this._bitrev[j] |= ((j >>> shift) & 3) << revShift;\n    }\n  }\n\n  this._out = null;\n  this._data = null;\n  this._inv = 0;\n}\nmodule.exports = FFT;\n\nFFT.prototype.fromComplexArray = function fromComplexArray(complex, storage) {\n  var res = storage || new Array(complex.length >>> 1);\n  for (var i = 0; i < complex.length; i += 2)\n    res[i >>> 1] = complex[i];\n  return res;\n};\n\nFFT.prototype.createComplexArray = function createComplexArray() {\n  const res = new Array(this._csize);\n  for (var i = 0; i < res.length; i++)\n    res[i] = 0;\n  return res;\n};\n\nFFT.prototype.toComplexArray = function toComplexArray(input, storage) {\n  var res = storage || this.createComplexArray();\n  for (var i = 0; i < res.length; i += 2) {\n    res[i] = input[i >>> 1];\n    res[i + 1] = 0;\n  }\n  return res;\n};\n\nFFT.prototype.completeSpectrum = function completeSpectrum(spectrum) {\n  var size = this._csize;\n  var half = size >>> 1;\n  for (var i = 2; i < half; i += 2) {\n    spectrum[size - i] = spectrum[i];\n    spectrum[size - i + 1] = -spectrum[i + 1];\n  }\n};\n\nFFT.prototype.transform = function transform(out, data) {\n  if (out === data)\n    throw new Error('Input and output buffers must be different');\n\n  this._out = out;\n  this._data = data;\n  this._inv = 0;\n  this._transform4();\n  this._out = null;\n  this._data = null;\n};\n\nFFT.prototype.realTransform = function realTransform(out, data) {\n  if (out === data)\n    throw new Error('Input and output buffers must be different');\n\n  this._out = out;\n  this._data = data;\n  this._inv = 0;\n  this._realTransform4();\n  this._out = null;\n  this._data = null;\n};\n\nFFT.prototype.inverseTransform = function inverseTransform(out, data) {\n  if (out === data)\n    throw new Error('Input and output buffers must be different');\n\n  this._out = out;\n  this._data = data;\n  this._inv = 1;\n  this._transform4();\n  for (var i = 0; i < out.length; i++)\n    out[i] /= this.size;\n  this._out = null;\n  this._data = null;\n};\n\n// radix-4 implementation\n//\n// NOTE: Uses of `var` are intentional for older V8 version that do not\n// support both `let compound assignments` and `const phi`\nFFT.prototype._transform4 = function _transform4() {\n  var out = this._out;\n  var size = this._csize;\n\n  // Initial step (permute and transform)\n  var width = this._width;\n  var step = 1 << width;\n  var len = (size / step) << 1;\n\n  var outOff;\n  var t;\n  var bitrev = this._bitrev;\n  if (len === 4) {\n    for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n      const off = bitrev[t];\n      this._singleTransform2(outOff, off, step);\n    }\n  } else {\n    // len === 8\n    for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n      const off = bitrev[t];\n      this._singleTransform4(outOff, off, step);\n    }\n  }\n\n  // Loop through steps in decreasing order\n  var inv = this._inv ? -1 : 1;\n  var table = this.table;\n  for (step >>= 2; step >= 2; step >>= 2) {\n    len = (size / step) << 1;\n    var quarterLen = len >>> 2;\n\n    // Loop through offsets in the data\n    for (outOff = 0; outOff < size; outOff += len) {\n      // Full case\n      var limit = outOff + quarterLen;\n      for (var i = outOff, k = 0; i < limit; i += 2, k += step) {\n        const A = i;\n        const B = A + quarterLen;\n        const C = B + quarterLen;\n        const D = C + quarterLen;\n\n        // Original values\n        const Ar = out[A];\n        const Ai = out[A + 1];\n        const Br = out[B];\n        const Bi = out[B + 1];\n        const Cr = out[C];\n        const Ci = out[C + 1];\n        const Dr = out[D];\n        const Di = out[D + 1];\n\n        // Middle values\n        const MAr = Ar;\n        const MAi = Ai;\n\n        const tableBr = table[k];\n        const tableBi = inv * table[k + 1];\n        const MBr = Br * tableBr - Bi * tableBi;\n        const MBi = Br * tableBi + Bi * tableBr;\n\n        const tableCr = table[2 * k];\n        const tableCi = inv * table[2 * k + 1];\n        const MCr = Cr * tableCr - Ci * tableCi;\n        const MCi = Cr * tableCi + Ci * tableCr;\n\n        const tableDr = table[3 * k];\n        const tableDi = inv * table[3 * k + 1];\n        const MDr = Dr * tableDr - Di * tableDi;\n        const MDi = Dr * tableDi + Di * tableDr;\n\n        // Pre-Final values\n        const T0r = MAr + MCr;\n        const T0i = MAi + MCi;\n        const T1r = MAr - MCr;\n        const T1i = MAi - MCi;\n        const T2r = MBr + MDr;\n        const T2i = MBi + MDi;\n        const T3r = inv * (MBr - MDr);\n        const T3i = inv * (MBi - MDi);\n\n        // Final values\n        const FAr = T0r + T2r;\n        const FAi = T0i + T2i;\n\n        const FCr = T0r - T2r;\n        const FCi = T0i - T2i;\n\n        const FBr = T1r + T3i;\n        const FBi = T1i - T3r;\n\n        const FDr = T1r - T3i;\n        const FDi = T1i + T3r;\n\n        out[A] = FAr;\n        out[A + 1] = FAi;\n        out[B] = FBr;\n        out[B + 1] = FBi;\n        out[C] = FCr;\n        out[C + 1] = FCi;\n        out[D] = FDr;\n        out[D + 1] = FDi;\n      }\n    }\n  }\n};\n\n// radix-2 implementation\n//\n// NOTE: Only called for len=4\nFFT.prototype._singleTransform2 = function _singleTransform2(outOff, off,\n                                                             step) {\n  const out = this._out;\n  const data = this._data;\n\n  const evenR = data[off];\n  const evenI = data[off + 1];\n  const oddR = data[off + step];\n  const oddI = data[off + step + 1];\n\n  const leftR = evenR + oddR;\n  const leftI = evenI + oddI;\n  const rightR = evenR - oddR;\n  const rightI = evenI - oddI;\n\n  out[outOff] = leftR;\n  out[outOff + 1] = leftI;\n  out[outOff + 2] = rightR;\n  out[outOff + 3] = rightI;\n};\n\n// radix-4\n//\n// NOTE: Only called for len=8\nFFT.prototype._singleTransform4 = function _singleTransform4(outOff, off,\n                                                             step) {\n  const out = this._out;\n  const data = this._data;\n  const inv = this._inv ? -1 : 1;\n  const step2 = step * 2;\n  const step3 = step * 3;\n\n  // Original values\n  const Ar = data[off];\n  const Ai = data[off + 1];\n  const Br = data[off + step];\n  const Bi = data[off + step + 1];\n  const Cr = data[off + step2];\n  const Ci = data[off + step2 + 1];\n  const Dr = data[off + step3];\n  const Di = data[off + step3 + 1];\n\n  // Pre-Final values\n  const T0r = Ar + Cr;\n  const T0i = Ai + Ci;\n  const T1r = Ar - Cr;\n  const T1i = Ai - Ci;\n  const T2r = Br + Dr;\n  const T2i = Bi + Di;\n  const T3r = inv * (Br - Dr);\n  const T3i = inv * (Bi - Di);\n\n  // Final values\n  const FAr = T0r + T2r;\n  const FAi = T0i + T2i;\n\n  const FBr = T1r + T3i;\n  const FBi = T1i - T3r;\n\n  const FCr = T0r - T2r;\n  const FCi = T0i - T2i;\n\n  const FDr = T1r - T3i;\n  const FDi = T1i + T3r;\n\n  out[outOff] = FAr;\n  out[outOff + 1] = FAi;\n  out[outOff + 2] = FBr;\n  out[outOff + 3] = FBi;\n  out[outOff + 4] = FCr;\n  out[outOff + 5] = FCi;\n  out[outOff + 6] = FDr;\n  out[outOff + 7] = FDi;\n};\n\n// Real input radix-4 implementation\nFFT.prototype._realTransform4 = function _realTransform4() {\n  var out = this._out;\n  var size = this._csize;\n\n  // Initial step (permute and transform)\n  var width = this._width;\n  var step = 1 << width;\n  var len = (size / step) << 1;\n\n  var outOff;\n  var t;\n  var bitrev = this._bitrev;\n  if (len === 4) {\n    for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n      const off = bitrev[t];\n      this._singleRealTransform2(outOff, off >>> 1, step >>> 1);\n    }\n  } else {\n    // len === 8\n    for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n      const off = bitrev[t];\n      this._singleRealTransform4(outOff, off >>> 1, step >>> 1);\n    }\n  }\n\n  // Loop through steps in decreasing order\n  var inv = this._inv ? -1 : 1;\n  var table = this.table;\n  for (step >>= 2; step >= 2; step >>= 2) {\n    len = (size / step) << 1;\n    var halfLen = len >>> 1;\n    var quarterLen = halfLen >>> 1;\n    var hquarterLen = quarterLen >>> 1;\n\n    // Loop through offsets in the data\n    for (outOff = 0; outOff < size; outOff += len) {\n      for (var i = 0, k = 0; i <= hquarterLen; i += 2, k += step) {\n        var A = outOff + i;\n        var B = A + quarterLen;\n        var C = B + quarterLen;\n        var D = C + quarterLen;\n\n        // Original values\n        var Ar = out[A];\n        var Ai = out[A + 1];\n        var Br = out[B];\n        var Bi = out[B + 1];\n        var Cr = out[C];\n        var Ci = out[C + 1];\n        var Dr = out[D];\n        var Di = out[D + 1];\n\n        // Middle values\n        var MAr = Ar;\n        var MAi = Ai;\n\n        var tableBr = table[k];\n        var tableBi = inv * table[k + 1];\n        var MBr = Br * tableBr - Bi * tableBi;\n        var MBi = Br * tableBi + Bi * tableBr;\n\n        var tableCr = table[2 * k];\n        var tableCi = inv * table[2 * k + 1];\n        var MCr = Cr * tableCr - Ci * tableCi;\n        var MCi = Cr * tableCi + Ci * tableCr;\n\n        var tableDr = table[3 * k];\n        var tableDi = inv * table[3 * k + 1];\n        var MDr = Dr * tableDr - Di * tableDi;\n        var MDi = Dr * tableDi + Di * tableDr;\n\n        // Pre-Final values\n        var T0r = MAr + MCr;\n        var T0i = MAi + MCi;\n        var T1r = MAr - MCr;\n        var T1i = MAi - MCi;\n        var T2r = MBr + MDr;\n        var T2i = MBi + MDi;\n        var T3r = inv * (MBr - MDr);\n        var T3i = inv * (MBi - MDi);\n\n        // Final values\n        var FAr = T0r + T2r;\n        var FAi = T0i + T2i;\n\n        var FBr = T1r + T3i;\n        var FBi = T1i - T3r;\n\n        out[A] = FAr;\n        out[A + 1] = FAi;\n        out[B] = FBr;\n        out[B + 1] = FBi;\n\n        // Output final middle point\n        if (i === 0) {\n          var FCr = T0r - T2r;\n          var FCi = T0i - T2i;\n          out[C] = FCr;\n          out[C + 1] = FCi;\n          continue;\n        }\n\n        // Do not overwrite ourselves\n        if (i === hquarterLen)\n          continue;\n\n        // In the flipped case:\n        // MAi = -MAi\n        // MBr=-MBi, MBi=-MBr\n        // MCr=-MCr\n        // MDr=MDi, MDi=MDr\n        var ST0r = T1r;\n        var ST0i = -T1i;\n        var ST1r = T0r;\n        var ST1i = -T0i;\n        var ST2r = -inv * T3i;\n        var ST2i = -inv * T3r;\n        var ST3r = -inv * T2i;\n        var ST3i = -inv * T2r;\n\n        var SFAr = ST0r + ST2r;\n        var SFAi = ST0i + ST2i;\n\n        var SFBr = ST1r + ST3i;\n        var SFBi = ST1i - ST3r;\n\n        var SA = outOff + quarterLen - i;\n        var SB = outOff + halfLen - i;\n\n        out[SA] = SFAr;\n        out[SA + 1] = SFAi;\n        out[SB] = SFBr;\n        out[SB + 1] = SFBi;\n      }\n    }\n  }\n};\n\n// radix-2 implementation\n//\n// NOTE: Only called for len=4\nFFT.prototype._singleRealTransform2 = function _singleRealTransform2(outOff,\n                                                                     off,\n                                                                     step) {\n  const out = this._out;\n  const data = this._data;\n\n  const evenR = data[off];\n  const oddR = data[off + step];\n\n  const leftR = evenR + oddR;\n  const rightR = evenR - oddR;\n\n  out[outOff] = leftR;\n  out[outOff + 1] = 0;\n  out[outOff + 2] = rightR;\n  out[outOff + 3] = 0;\n};\n\n// radix-4\n//\n// NOTE: Only called for len=8\nFFT.prototype._singleRealTransform4 = function _singleRealTransform4(outOff,\n                                                                     off,\n                                                                     step) {\n  const out = this._out;\n  const data = this._data;\n  const inv = this._inv ? -1 : 1;\n  const step2 = step * 2;\n  const step3 = step * 3;\n\n  // Original values\n  const Ar = data[off];\n  const Br = data[off + step];\n  const Cr = data[off + step2];\n  const Dr = data[off + step3];\n\n  // Pre-Final values\n  const T0r = Ar + Cr;\n  const T1r = Ar - Cr;\n  const T2r = Br + Dr;\n  const T3r = inv * (Br - Dr);\n\n  // Final values\n  const FAr = T0r + T2r;\n\n  const FBr = T1r;\n  const FBi = -T3r;\n\n  const FCr = T0r - T2r;\n\n  const FDr = T1r;\n  const FDi = T3r;\n\n  out[outOff] = FAr;\n  out[outOff + 1] = 0;\n  out[outOff + 2] = FBr;\n  out[outOff + 3] = FBi;\n  out[outOff + 4] = FCr;\n  out[outOff + 5] = 0;\n  out[outOff + 6] = FDr;\n  out[outOff + 7] = FDi;\n};\n","import FFT from 'fft.js'\n\nconst audioCtx = new window.AudioContext()\n\nexport interface ProcessArrayBufferResult {\n  source: AudioBuffer\n  transformed: AudioBuffer\n}\n\nexport function processArrayBuffer(\n  arrayBuffer: ArrayBuffer,\n  fftSize: number,\n  scale: number\n): Promise<ProcessArrayBufferResult> {\n  return audioCtx.decodeAudioData(arrayBuffer).then(audioBuffer => {\n    console.log(audioBuffer)\n\n    return {\n      source: audioBuffer,\n      transformed: processAudioBuffer(audioBuffer, fftSize, scale)\n    }\n  })\n}\n\nfunction processAudioBuffer(\n  audioBuffer: AudioBuffer,\n  fftSize: number,\n  scale: number\n): AudioBuffer {\n  console.log(audioBuffer.length)\n\n  const newAudioBuffer = audioCtx.createBuffer(\n    audioBuffer.numberOfChannels,\n    audioBuffer.length,\n    audioBuffer.sampleRate\n  )\n  const canvas = document.querySelector('canvas')\n  const canvasContext = canvas.getContext('2d')\n\n  for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {\n    let channelData = audioBuffer.getChannelData(channel)\n    let newChannelData = newAudioBuffer.getChannelData(channel)\n    console.log(channelData.length)\n\n    // mute other channels than 1st.\n    if (channel !== 0) {\n      continue\n    }\n\n    const imageData = canvasContext.createImageData(1024, 512)\n    const ratio = 1.059463094\n    const chunkCount = Math.floor(channelData.length / fftSize)\n    const freqScale = 2\n    const powerScale = 10\n\n    for (let chunk = 0; chunk < chunkCount; chunk++) {\n      const f = new FFT(fftSize)\n      const inArray = new Array(fftSize)\n      for (let i = 0; i < inArray.length; i++) {\n        inArray[i] = channelData[i + fftSize * chunk]\n      }\n      // console.log(inArray)\n\n      const spectrum = f.createComplexArray()\n      f.realTransform(spectrum, inArray)\n\n      let maxInfo = { freq: 0, power: 0 }\n      for (let i = 0; i < spectrum.length; i += 2) {\n        const power =\n          spectrum[i] * spectrum[i] + spectrum[i + 1] * spectrum[i + 1]\n        if (maxInfo.power < power) {\n          maxInfo = { freq: i, power }\n        }\n      }\n\n      const spectrumNew = f.createComplexArray()\n      for (let i = 0; i < spectrum.length; i++) {\n        spectrumNew[Math.floor(i * Math.pow(ratio, scale))] = spectrum[i]\n      }\n\n      f.completeSpectrum(spectrumNew)\n      // console.log(spectrumNew)\n\n      // draw spectrum\n      for (let y = 0; y < spectrumNew.length / 2; y += 2) {\n        const yy =\n          imageData.height -\n          Math.floor((y / fftSize) * freqScale * imageData.height)\n        if (yy < 0) continue\n        const power = Math.sqrt(\n          spectrumNew[y] * spectrumNew[y] +\n            spectrumNew[y + 1] * spectrumNew[y + 1]\n        )\n        imageData.data[(yy * imageData.width + chunk) * 4] += power * powerScale\n        imageData.data[(yy * imageData.width + chunk) * 4 + 3] = 255\n      }\n      const yy =\n        imageData.height -\n        Math.floor((maxInfo.freq / fftSize) * freqScale * imageData.height)\n      if (yy >= 0) {\n        imageData.data[(yy * imageData.width + chunk) * 4 + 0] = 255\n        imageData.data[(yy * imageData.width + chunk) * 4 + 1] = 255\n        imageData.data[(yy * imageData.width + chunk) * 4 + 2] = 255\n      }\n      // console.log(`${maxInfo.freq} => ${maxInfo.value}`)\n\n      const resultComplex = f.createComplexArray()\n      f.inverseTransform(resultComplex, spectrumNew)\n      const resultReal = f.fromComplexArray(resultComplex)\n      // console.log(resultReal)\n\n      for (let i = 0; i < resultReal.length; i++) {\n        newChannelData[i + fftSize * chunk] = resultReal[i]\n      }\n    }\n\n    canvasContext.putImageData(imageData, 0, 0)\n    console.log('finished')\n  }\n  return newAudioBuffer\n}\n\n// https://stackoverflow.com/a/30045041/1081774\n// Convert a audio-buffer segment to a Blob using WAVE representation\nexport function bufferToWave(\n  abuffer: AudioBuffer,\n  offset: number,\n  len: number\n): Blob {\n  var numOfChan = abuffer.numberOfChannels,\n    length = len * numOfChan * 2 + 44,\n    buffer = new ArrayBuffer(length),\n    view = new DataView(buffer),\n    channels = [],\n    i,\n    sample,\n    pos = 0\n\n  // write WAVE header\n  setUint32(0x46464952) // \"RIFF\"\n  setUint32(length - 8) // file length - 8\n  setUint32(0x45564157) // \"WAVE\"\n\n  setUint32(0x20746d66) // \"fmt \" chunk\n  setUint32(16) // length = 16\n  setUint16(1) // PCM (uncompressed)\n  setUint16(numOfChan)\n  setUint32(abuffer.sampleRate)\n  setUint32(abuffer.sampleRate * 2 * numOfChan) // avg. bytes/sec\n  setUint16(numOfChan * 2) // block-align\n  setUint16(16) // 16-bit (hardcoded in this demo)\n\n  setUint32(0x61746164) // \"data\" - chunk\n  setUint32(length - pos - 4) // chunk length\n\n  // write interleaved data\n  for (i = 0; i < abuffer.numberOfChannels; i++)\n    channels.push(abuffer.getChannelData(i))\n\n  while (pos < length) {\n    for (i = 0; i < numOfChan; i++) {\n      // interleave channels\n      sample = Math.max(-1, Math.min(1, channels[i][offset])) // clamp\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0 // scale to 16-bit signed int\n      view.setInt16(pos, sample, true) // update data chunk\n      pos += 2\n    }\n    offset++ // next source sample\n  }\n\n  // create Blob\n  return new Blob([buffer], { type: 'audio/wav' })\n\n  function setUint16(data) {\n    view.setUint16(pos, data, true)\n    pos += 2\n  }\n\n  function setUint32(data) {\n    view.setUint32(pos, data, true)\n    pos += 4\n  }\n}\n","import { h, app, ActionsType, View } from 'hyperapp'\nimport { processArrayBuffer, bufferToWave } from './audio'\n\ninterface State {\n  source?: AudioBuffer\n  sourceUrl: string\n  transformed?: AudioBuffer\n  transformedUrl: string\n  fftSize: number\n  scale: number\n}\n\nconst state: State = {\n  sourceUrl: '',\n  transformedUrl: '',\n  fftSize: 4096,\n  scale: 0\n}\n\ninterface Actions {\n  setFile(file: File): State\n  setSourceAudioBuffer(buffer: AudioBuffer): State\n  setTransformedAudioBuffer(buffer: AudioBuffer): State\n  setFftSize(value: number): State\n  setScale(value: number): State\n}\n\nconst actions: ActionsType<State, Actions> = {\n  setFile: (file: File) => (state, actions) => {\n    console.log(file)\n\n    let reader = new FileReader()\n    reader.onload = () => {\n      processArrayBuffer(\n        reader.result as ArrayBuffer,\n        state.fftSize,\n        state.scale\n      ).then(result => {\n        actions.setSourceAudioBuffer(result.source)\n        actions.setTransformedAudioBuffer(result.transformed)\n      })\n    }\n    reader.readAsArrayBuffer(file)\n    return state\n  },\n  setSourceAudioBuffer: (buffer: AudioBuffer) => state => {\n    if (state.sourceUrl !== '') {\n      URL.revokeObjectURL(state.sourceUrl)\n    }\n    const url = URL.createObjectURL(bufferToWave(buffer, 0, buffer.length))\n    return { source: buffer, sourceUrl: url }\n  },\n  setTransformedAudioBuffer: (buffer: AudioBuffer) => state => {\n    if (state.transformedUrl !== '') {\n      URL.revokeObjectURL(state.transformedUrl)\n    }\n    const url = URL.createObjectURL(bufferToWave(buffer, 0, buffer.length))\n    return { transformed: buffer, transformedUrl: url }\n  },\n  setFftSize: (value: number) => state => {\n    if (isNaN(value)) return\n    return { fftSize: value }\n  },\n  setScale: (value: number) => state => {\n    if (isNaN(value)) return\n    return { scale: value }\n  }\n}\n\nconst view: View<State, Actions> = (state, actions) => (\n  <div class=\"section\">\n    source: <audio controls src={state.sourceUrl} />\n    transformed: <audio controls src={state.transformedUrl} />\n    <div class=\"field\">\n      <input\n        type=\"file\"\n        accept=\"audio/*\"\n        capture=\"microphone\"\n        onchange={event => {\n          actions.setFile(event.target.files[0])\n          event.target.value = ''\n        }}\n      />\n    </div>\n    <div class=\"field\">\n      <label class=\"label\">FFT Size</label>\n      <div class=\"control\">\n        <input\n          class=\"input\"\n          value={state.fftSize}\n          oninput={event => {\n            actions.setFftSize(Number(event.target.value))\n          }}\n        />\n      </div>\n    </div>\n    <div class=\"field\">\n      <label class=\"label\">Scale</label>\n      <div class=\"control\">\n        <input\n          class=\"input\"\n          type=\"number\"\n          value={state.scale}\n          oninput={event => {\n            actions.setScale(Number(event.target.value))\n          }}\n        />\n      </div>\n    </div>\n    <canvas id=\"canvas\" width=\"512\" height=\"512\" />\n  </div>\n)\n\napp<State, Actions>(state, actions, view, document.body)\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}